@{
    ViewData["Title"] = "Videos ";
}
@model BookingApp.Models.VideoModel
<div class="container" style="font-size:18px!important">
    <div >
        <input id="video-id" value="@Model.Video.Id" hidden />
        <h4>Video </h4>
        <div class="row">
            <div class="col-9">
                <video id="my-player"
                       class="video-js vjs-default-skin vjs-16-9"
                       @* style="width:90%!important;height:400px!important" *@
                       controls
                       preload="auto"
                       data-setup='{ "playbackRates": [0.5, 1, 1.5, 2] }'>
                    <source id="source" src="@ViewBag.filePath" type="video/mp4"></source>
                    <p class="vjs-no-js">
                        To view this video please enable JavaScript, and consider upgrading to a
                        web browser that
                        <a href="https://videojs.com/html5-video-support/" target="_blank">
                            supports HTML5 video
                        </a>
                    </p>
                </video> 
                <div class="row">
                    <div class="video-info col-12">
                        <div class="row video-stats">
                            <span style="font-weight: bold;"> @ViewBag.channel</span>
                            <span>•</span>
                            <span id="time" style="font-weight: bold;">@Model.Video.Start - @Model.Video.End </span>

                        </div>
                        <div class="row video-stats">
                            <span id="time" style="font-weight: bold;">
                                 DANH SÁCH KEYLOG
                            </span>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-3">
                <h2>Related Videos</h2>
                <div class="video-list" style="font-size:16px">
                    @foreach (var item in ViewBag.relatedVideo)
                    {
                        <!-- Each video item -->
                        <div class="video-item" id="@item.Id" onclick="setVideo('@item.Id')" >
                            <video style="width:60%!important;height:60%!important">
                                <source src='/@item.VideoPath.Replace(@"\",@"/")' type="video/mp4">
                            </video>
                            <div class="video-title">@item.Start - @item.End</div>

                        </div>
                        <!-- Repeat for more videos -->
                    }
                </div>
            </div>
            <div class="col-12" style="font-size:11px!important">
                <div class="tab-content clearfix">
                    <div class="tab-pane active" id="booksTab">
                        <div class="row">
                            <div class="col-sm-12">

                                <div class="tab-content">
                                    <div id="tab_1" class="tab-pane active">
                                        <div class="box">
                                            <!-- Bộ tìm kiếm -->
                                            <div class="box-body" id="zone_timkiem">
                                                <!--Row 1-->
                                                <!--End Row 1-->
                                                <!--Row 2-->
                                                <div style="width: 100%">
                                                    <div style="width: 10%; float: left">
                                                        <label style="margin-top: 5px !important">Keyword </label>
                                                    </div>
                                                    <div style="width: 30%; float: left; padding-right: 10px;">
                                                        <input type="text" id="keyword" placeholder="Nhập keyword" class="form-control" />
                                                    </div>

                                                    <div class="clear"></div>
                                                </div>
                                                <div style="width: 100%">
                                                    <div style="width: 10%; float: left">
                                                        <label style="margin-top: 0px !important"></label>
                                                    </div>
                                                    <div style="width: 70%; float: left; margin-right: 10px">
                                                        <div class="pull-left">
                                                            <a class="btn btn-default" href="javascript:void(0)" id="btnTimKiem" title="Tìm kiếm"><i class="fa fa-search"></i> Tìm kiếm </a>
                                                            <a title="Hủy tìm kiếm" class="btn btn-default" id="btnHuyTimKiem"><i class="fa fa-undo"></i> Hủy tìm kiếm </a>
                                                        </div>
                                                        <div class="pull-right" style="margin-top: 10px">
                                                        </div>
                                                    </div>
                                                    <div style="width: 20%; float: left">
                                                    </div>
                                                </div>
                                            </div>
                                            <!--End Row 6-->
                                            <!--Table-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <dl class="row">
                            <dd class="col-sm-12">
                                <table id="tbldata" class="table table-bordered table-hover tbl-pagination" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th style="display: none">Id</th>
                                            <th style="width: 150px">Time</th>
                                            <th style="width: 50px; text-align: center !important">UserName</th>
                                            <th style="width: 150px; text-align: center !important">Windows</th>
                                            <th style="width: 1000px;text-align: left !important">Keys</th>
                                        </tr>
                                    </thead>
                                </table>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<style>
    .multiline {
        white-space: pre-line;
    }
    main {
        display: flex;
        justify-content: space-between;
        padding: 20px;
        font-size: 13px!important;
    }

    .video-player {
        width: 70%;
    }

        .video-player video {
            width: 100%;
            border-radius: 4px;
        }

    .video-info {
        padding: 20px 0;
    }

    .video-stats {
        color: #606060;
    }

    .related-videos {
        width: 28%;
    }

        .related-videos h2 {
            margin: 0;
            padding-bottom: 10px;
        }

    .video-list {
        display: flex;
        flex-direction: column;
    }

    .video-item {
        display: flex;
        margin-bottom: 10px;
        box-shadow: 1px 1px 1px 1px #888888;
    }

        .video-item img {
            width: 120px;
            height: 70px;
            border-radius: 4px;
        }

        .video-item .video-title {
            margin-left: 10px;
            align-self: center;
        }
    .actions {
        text-align: right;
    }

    .btn-circle {
        width: 30px;
        height: 30px;
        padding: 6px 0px;
        border-radius: 15px;
        text-align: center;
        font-size: 12px;
        line-height: 1.42857;
    }

    .div-center {
        width: 90%;
        margin: auto;
        max-width: 400px;
        overflow: auto;
        padding: 1em 2em;
    }
</style>
<link href="~/lib/video-js.min.css" rel="stylesheet">
<script src="~/lib/video.min.js"></script>
<script src="/js/Video/Detail.js" type="text/javascript"></script>

<script>
    var main_doc = {};
    main_doc['Detail'] = new Detail();
    $(document).ready(function () {
        main_doc.Detail.init();
    });

    function setVideo(id) {
        console.log(id)
        document.getElementById("video-id").value = id + '';
        main_doc.Detail.list_DanhSach()
        let lst = document.querySelectorAll(".video-item");
        lst.forEach((element) => { element.style.backgroundColor = "white"; });
        document.getElementById(id).style.backgroundColor = "beige";
        $.ajax({
            url: "/api/Upload/Get",
            dataType: "json",
            type: "GET",
            contentType: 'application/json; charset=utf-8', //define a contentType of your request
            cache: false,
            data: { id: id },
            success: function (data) {
                // data is your result from controller
                console.log(data)
                var player = videojs('my-player');
                    player.src({ type: 'video/mp4', src: data.videoPath });
                    document.getElementById("time").innerHTML = data.start + " - " + data.end;

            },
            error: function (xhr) {
                alert('error');
            }
        });
    }
</script>